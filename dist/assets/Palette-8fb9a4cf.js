import{d as H,c as y,a as d,o as m,b as $,e as v,f as h,I as p,n as U,g as ce,t as J,h as M,i as R,u as L,j as K,k as T,C as ie,_ as S,w as Q,B as ue,l as de,m as he,r as P,p as C,q as me,s as ve,T as pe,D as G,v as ge,F as W,x as ye,y as fe,z as ke,A as xe}from"./index-cb782709.js";const Ce={class:"colorInfo"},Me={class:"colorLabel"},Ie={class:"leftRightButtons"},Fe=H({__name:"PaletteColor",props:{color:{type:Object,required:!0},displayType:{type:String,default:"hex"},canMoveRight:{type:Boolean,required:!0},canMoveLeft:{type:Boolean,required:!0},pickerOpen:{type:Boolean,default:!1},index:{type:Number,required:!0},maxIndex:{type:Number,required:!0}},emits:["edit","togglePicker","add","moveRight","moveLeft","delete","pin"],setup(s,{emit:a}){const c=s,I=y(()=>{switch(c.displayType.toLowerCase()){case"hsl":let f=Math.round(d(c.color.hex).get("hsl.h")),r=Math.round(d(c.color.hex).get("hsl.s")*100),i=Math.round(d(c.color.hex).get("hsl.l")*100);return`hsl(${isNaN(f)?0:f}, ${r}%, ${i}%)`;case"rgb":return d(c.color.hex).css();case"hex":return c.color.hex}}),g=y(()=>d(c.color.hex).luminance()<.5?"var(--text-white)":"var(--text-dark)"),n=y(()=>({addColorButton:!0,moveLeft:c.index!=0,moveRight:c.index==0})),F=y(()=>({addColorButton:!0,moveLeft:c.index===c.maxIndex,moveRight:c.index!==c.maxIndex}));return y(()=>c.color.locked?"material-icons pinIcon":"material-icons-outlined pinIcon"),(f,r)=>(m(),$("div",{class:"paletteColor move-transition",style:T(`background-color: ${s.color.hex}; color: ${g.value}; fill: ${g.value}`)},[v("div",{class:U(n.value)},[h(p,{name:"i-tabler-plus",onClick:r[0]||(r[0]=i=>a("add",s.index))})],2),v("div",Ce,[v("p",Me,[ce(J(I.value)+" ",1),s.color.locked?(m(),M(p,{key:0,name:"i-tabler-pin-filled"})):R("",!0)]),h(p,{name:"i-tabler-copy",class:"copyIcon",onClick:r[1]||(r[1]=i=>L(K)(s.color.hex))}),h(p,{name:"i-tabler-pencil",class:"editIcon",onClick:r[2]||(r[2]=i=>a("togglePicker"))}),v("span",null,[s.color.locked?(m(),M(p,{key:0,class:"pinIcon",name:"i-tabler-pin-filled",style:T(`opacity: ${s.color.locked?"1":"0.6"}`),onClick:r[3]||(r[3]=i=>a("pin"))},null,8,["style"])):(m(),M(p,{key:1,class:"pinIcon",name:"i-tabler-pin",style:T(`opacity: ${s.color.locked?"1":"0.6"}`),onClick:r[4]||(r[4]=i=>a("pin"))},null,8,["style"]))]),h(p,{name:"i-tabler-trash",class:"deleteIcon",onClick:r[5]||(r[5]=i=>a("delete"))}),v("span",Ie,[s.canMoveLeft?(m(),$("div",{key:0,class:"moveLeftButton",onClick:r[6]||(r[6]=i=>a("moveLeft"))},[h(p,{name:"i-tabler-chevron-left"})])):R("",!0),s.canMoveRight?(m(),$("div",{key:1,class:"moveRightButton",onClick:r[7]||(r[7]=i=>a("moveRight"))},[h(p,{name:"i-tabler-chevron-right"})])):R("",!0)])]),v("div",{class:U(F.value)},[h(p,{name:"i-tabler-plus",onClick:r[8]||(r[8]=i=>a("add",s.index+1))})],2),s.pickerOpen?(m(),M(ie,{key:0,responsive:"",closable:"",hueIn:L(d)(s.color.hex).get("hsv.h"),satIn:L(d)(s.color.hex).get("hsv.s"),valIn:L(d)(s.color.hex).get("hsv.v"),class:"colorPickerBig",onChange:r[9]||(r[9]=i=>a("edit",s.color,i)),onClose:r[10]||(r[10]=i=>a("togglePicker"))},null,8,["hueIn","satIn","valIn"])):R("",!0)],4))}});const be=S(Fe,[["__scopeId","data-v-4045427f"]]),$e=H({__name:"ImgButton",props:{icon:{type:String,required:!0},large:{type:Boolean}},setup(s){const a=s,c=y(()=>({width:a.large?"48px":"40px",height:a.large?"48px":"40px"}));return(I,g)=>(m(),M(ue,{class:"imgButton",style:T(c.value),onClick:g[0]||(g[0]=n=>I.$emit("click",n))},{default:Q(()=>[h(p,{name:s.icon},null,8,["name"])]),_:1},8,["style"]))}});const X=S($e,[["__scopeId","data-v-9f394f68"]]),Be=s=>(fe("data-v-354aad68"),s=s(),ke(),s),Re=["content"],Le=["content"],Pe=Be(()=>v("meta",{property:"og:title",content:"Dyetools - Color palette"},null,-1)),Te={class:"palette"},qe={class:"settingsBar"},He=H({__name:"Palette",setup(s){const{t:a}=de(),c=he(),I=[a("palette.harmony.auto"),a("palette.harmony.analogous"),a("palette.harmony.monochromatic"),a("palette.harmony.complementary"),a("palette.harmony.split-complementary"),a("palette.harmony.triadic"),a("palette.harmony.tetradic"),a("palette.harmony.square"),a("palette.harmony.cool"),a("palette.harmony.warm"),a("palette.harmony.random")],g=["HEX","RGB","HSL"],n=P([{hashId:C(6),hex:"#FFFFFF",locked:!1},{hashId:C(6),hex:"#FFFFFF",locked:!1},{hashId:C(6),hex:"#FFFFFF",locked:!1},{hashId:C(6),hex:"#FFFFFF",locked:!1},{hashId:C(6),hex:"#FFFFFF",locked:!1}]),F=P(-1),f=P(I[0]),r=y(()=>n.value.filter(t=>t.locked)),i=y(()=>n.value.filter(t=>!t.locked)),q=P(g[0]),Y=t=>{let e=n.value,l=e[t];e[t]=e[t-1],e[t-1]=l,n.value=e,b()},Z=t=>{let e=n.value,l=e[t];e[t]=e[t+1],e[t+1]=l,n.value=e,b()},ee=t=>{f.value=t,B()},te=()=>{let t=window.location.href;K(t),xe.value=a("common.link-copied")},le=t=>{n.value[t].locked=!n.value[t].locked},oe=(t,e)=>{console.log(e,t);let l=isNaN(e.hue)?0:e.hue;t.hex=d(l,e.sat,e.val,"hsv").hex(),b()},ae=t=>{F.value!=t?F.value=t:F.value=-1},w=t=>{let e=t.get("hsl.h"),o=[[e,e+20,e+40],[e,e-20,e-40]][Math.round(Math.random())];k(t,o)},_=t=>{let l=[t.get("hsl.h")];k(t,l)},A=t=>{let e=t.get("hsl.h"),o=[[e,e+180],[e,e-180]][Math.round(Math.random())];k(t,o)},N=t=>{let e=t.get("hsl.h"),o=[[e,e+171,e+99],[e,e-171,e-99]][Math.round(Math.random())];k(t,o)},V=t=>{let e=t.get("hsl.h"),o=[[e,e+120,e+240],[e,e-120,e-240]][Math.round(Math.random())];k(t,o)},D=t=>{for(let e=t;e<n.value.length;e++){let l=n.value[e];l.locked||(l.hex=d.random().hex())}},O=t=>{let e=t.get("hsl.h"),o=[[e,e+90,e+180,e+270],[e,e-90,e-180,e-270]][Math.round(Math.random())];k(t,o)},j=t=>{let e=t.get("hsl.h"),o=[[e,60+e,180+e,240+e],[e,e-60,e-180,e-240]][Math.round(Math.random())];k(t,o)},k=(t,e)=>{for(let l=0;l<i.value.length;l++){let o=i.value[l];if(!o.locked){let u=t.get("hsl.h");l<e.length?u=e[l]%360:u=e[Math.round(Math.random()*e.length-1)]%360;let x=Math.random(),se=Math.random();o.hex=d(u,x,se,"hsl").hex()}}},E=t=>{r.value.length==0&&(t=0);for(let e=t;e<n.value.length;e++){let l=n.value[e];if(!l.locked){let o=(Math.random()*110+310)%360,u=Math.random(),x=Math.random();l.hex=d(o,u,x,"hsl").hex()}}},z=t=>{r.value.length==0&&(t=0);for(let e=t;e<n.value.length;e++){let l=n.value[e];if(!l.locked){let o=(Math.random()*250+60)%360,u=Math.random(),x=Math.random();l.hex=d(o,u,x,"hsl").hex()}}},B=()=>{let t=null;const e=r.value;let l=0;if(e.length==0)t=d.random(),n.value[0].hex=t.hex(),l=1;else{let o=Math.round(Math.random()*(e.length-1));t=d(e[o].hex)}switch(f.value){case a("palette.harmony.auto"):let o=Math.random()*10;o<1?D(l):o<2?w(t):o<3?V(t):o<4?j(t):o<5?A(t):o<6?N(t):o<7?O(t):o<8?E(l):o<9?z(l):_(t);break;case a("palette.harmony.random"):D(l);break;case a("palette.harmony.analogous"):w(t);break;case a("palette.harmony.triadic"):V(t);break;case a("palette.harmony.tetradic"):j(t);break;case a("palette.harmony.complementary"):A(t);break;case a("palette.harmony.split-complementary"):N(t);break;case a("palette.harmony.square"):O(t);break;case a("palette.harmony.warm"):E(l);break;case a("palette.harmony.cool"):z(l);break;case a("palette.harmony.monochromatic"):_(t);break}b()},ne=t=>{n.value.length<10&&(n.value.splice(t,0,{hashId:C(6),hex:d.random().hex(),locked:!1}),b())},re=t=>{n.value.length>1&&(n.value=n.value.filter((e,l,o)=>t!=l),b())},b=()=>{let t=n.value.map(e=>e.hex.substring(1)).join("-");c.push({path:c.currentRoute.value.path,query:{colors:t}})};return me(()=>{if(c.currentRoute.value.query.colors==null)B();else{if(typeof c.currentRoute.value.query.colors!="string")return;const t=c.currentRoute.value.query.colors.split("-");n.value=[];for(let e=0;e<t.length;e++)n.value.push({hex:"#"+t[e].toUpperCase(),locked:!1,hashId:C(6)})}}),ve(()=>{document.addEventListener("keypress",t=>{t.code=="Space"&&B()})}),(t,e)=>(m(),$(W,null,[(m(),M(pe,{to:"head"},[v("meta",{name:"description",content:n.value.map(l=>l.hex).join(", ")},null,8,Re),v("meta",{property:"og:description",content:n.value.map(l=>l.hex).join(", ")},null,8,Le),Pe,v("title",null,"Dyetools - "+J(t.$t("palette.title")),1)])),v("div",Te,[v("div",qe,[h(G,{values:I,"onUpdate:modelValue":ee,"model-value":f.value},null,8,["model-value"]),h(G,{values:g,modelValue:q.value,"onUpdate:modelValue":e[0]||(e[0]=l=>q.value=l)},null,8,["modelValue"]),h(X,{icon:"i-tabler-share",onClick:te}),h(X,{icon:"i-tabler-refresh",onClick:B})]),h(ge,{name:"move",tag:"div",class:"paletteColors"},{default:Q(()=>[(m(!0),$(W,null,ye(n.value,(l,o)=>(m(),M(be,{key:l.hashId,color:l,canMoveLeft:o!==0,canMoveRight:o!==n.value.length-1,displayType:q.value,pickerOpen:F.value===o,index:o,"max-index":n.value.length-1,onTogglePicker:u=>ae(o),onMoveLeft:u=>Y(o),onMoveRight:u=>Z(o),onDelete:u=>re(o),onEdit:(u,x)=>oe(u,x),onPin:u=>le(o),onAdd:e[1]||(e[1]=u=>ne(u))},null,8,["color","canMoveLeft","canMoveRight","displayType","pickerOpen","index","max-index","onTogglePicker","onMoveLeft","onMoveRight","onDelete","onEdit","onPin"]))),128))]),_:1})])],64))}});const we=S(He,[["__scopeId","data-v-354aad68"]]);export{we as default};
