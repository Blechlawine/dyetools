import{d as S,c as y,a as h,o as g,b as R,e as v,f as m,I as p,n as G,g as ce,t as K,h as F,i as P,u as B,j as Q,k as q,C as ie,_,w as T,B as ue,l as de,m as he,r as H,p as M,q as me,s as ve,D as W,T as pe,F as X,H as ge,v as ye,x as fe,y as ke,z as xe}from"./index-d777ab66.js";const Ce={class:"colorInfo"},Me={class:"colorLabel"},be={class:"leftRightButtons"},Ie=S({__name:"PaletteColor",props:{color:{type:Object,required:!0},displayType:{type:String,default:"hex"},canMoveRight:{type:Boolean,required:!0},canMoveLeft:{type:Boolean,required:!0},pickerOpen:{type:Boolean,default:!1},index:{type:Number,required:!0},maxIndex:{type:Number,required:!0}},emits:["edit","togglePicker","add","moveRight","moveLeft","delete","pin"],setup(s,{emit:n}){const i=n,c=s,f=y(()=>{switch(c.displayType.toLowerCase()){case"hsl":let k=Math.round(h(c.color.hex).get("hsl.h")),r=Math.round(h(c.color.hex).get("hsl.s")*100),u=Math.round(h(c.color.hex).get("hsl.l")*100);return`hsl(${isNaN(k)?0:k}, ${r}%, ${u}%)`;case"rgb":return h(c.color.hex).css();case"hex":return c.color.hex}}),a=y(()=>h(c.color.hex).luminance()<.5?"var(--text-white)":"var(--text-dark)"),b=y(()=>({addColorButton:!0,moveLeft:c.index!=0,moveRight:c.index==0})),$=y(()=>({addColorButton:!0,moveLeft:c.index===c.maxIndex,moveRight:c.index!==c.maxIndex}));return y(()=>c.color.locked?"material-icons pinIcon":"material-icons-outlined pinIcon"),(k,r)=>(g(),R("div",{class:"paletteColor move-transition",style:q(`background-color: ${s.color.hex}; color: ${a.value}; fill: ${a.value}`)},[v("div",{class:G(b.value)},[m(p,{name:"i-tabler-plus",onClick:r[0]||(r[0]=u=>i("add",s.index))})],2),v("div",Ce,[v("p",Me,[ce(K(f.value)+" ",1),s.color.locked?(g(),F(p,{key:0,name:"i-tabler-pin-filled"})):P("",!0)]),m(p,{name:"i-tabler-copy",class:"copyIcon",onClick:r[1]||(r[1]=u=>B(Q)(s.color.hex))}),m(p,{name:"i-tabler-pencil",class:"editIcon",onClick:r[2]||(r[2]=u=>i("togglePicker"))}),v("span",null,[s.color.locked?(g(),F(p,{key:0,class:"pinIcon",name:"i-tabler-pin-filled",style:q(`opacity: ${s.color.locked?"1":"0.6"}`),onClick:r[3]||(r[3]=u=>i("pin"))},null,8,["style"])):(g(),F(p,{key:1,class:"pinIcon",name:"i-tabler-pin",style:q(`opacity: ${s.color.locked?"1":"0.6"}`),onClick:r[4]||(r[4]=u=>i("pin"))},null,8,["style"]))]),m(p,{name:"i-tabler-trash",class:"deleteIcon",onClick:r[5]||(r[5]=u=>i("delete"))}),v("span",be,[s.canMoveLeft?(g(),R("div",{key:0,class:"moveLeftButton",onClick:r[6]||(r[6]=u=>i("moveLeft"))},[m(p,{name:"i-tabler-chevron-left"})])):P("",!0),s.canMoveRight?(g(),R("div",{key:1,class:"moveRightButton",onClick:r[7]||(r[7]=u=>i("moveRight"))},[m(p,{name:"i-tabler-chevron-right"})])):P("",!0)])]),v("div",{class:G($.value)},[m(p,{name:"i-tabler-plus",onClick:r[8]||(r[8]=u=>i("add",s.index+1))})],2),s.pickerOpen?(g(),F(ie,{key:0,responsive:"",closable:"",hueIn:B(h)(s.color.hex).get("hsv.h"),satIn:B(h)(s.color.hex).get("hsv.s"),valIn:B(h)(s.color.hex).get("hsv.v"),class:"colorPickerBig",onChange:r[9]||(r[9]=u=>i("edit",s.color,u)),onClose:r[10]||(r[10]=u=>i("togglePicker"))},null,8,["hueIn","satIn","valIn"])):P("",!0)],4))}});const Fe=_(Ie,[["__scopeId","data-v-63c38be0"]]),$e=S({__name:"ImgButton",props:{icon:{type:String,required:!0},large:{type:Boolean}},setup(s){const n=s,i=y(()=>({width:n.large?"48px":"40px",height:n.large?"48px":"40px"}));return(c,f)=>(g(),F(ue,{class:"imgButton",style:q(i.value),onClick:f[0]||(f[0]=a=>c.$emit("click",a))},{default:T(()=>[m(p,{name:s.icon},null,8,["name"])]),_:1},8,["style"]))}});const J=_($e,[["__scopeId","data-v-d1d4a135"]]),Be=s=>(ke("data-v-00f20bb4"),s=s(),xe(),s),Re=["content"],Le=["content"],Pe=Be(()=>v("meta",{property:"og:title",content:"Dyetools - Color palette"},null,-1)),He={class:"palette"},qe={class:"settingsBar"},Te=S({__name:"Palette",setup(s){const{t:n}=de(),i=he(),c=[n("palette.harmony.auto"),n("palette.harmony.analogous"),n("palette.harmony.monochromatic"),n("palette.harmony.complementary"),n("palette.harmony.split-complementary"),n("palette.harmony.triadic"),n("palette.harmony.tetradic"),n("palette.harmony.square"),n("palette.harmony.cool"),n("palette.harmony.warm"),n("palette.harmony.random")],f=["HEX","RGB","HSL"],a=H([{hashId:M(6),hex:"#FFFFFF",locked:!1},{hashId:M(6),hex:"#FFFFFF",locked:!1},{hashId:M(6),hex:"#FFFFFF",locked:!1},{hashId:M(6),hex:"#FFFFFF",locked:!1},{hashId:M(6),hex:"#FFFFFF",locked:!1}]),b=H(-1),$=H(c[0]),k=y(()=>a.value.filter(t=>t.locked)),r=y(()=>a.value.filter(t=>!t.locked)),u=H(f[0]),Y=t=>{let e=a.value,l=e[t];e[t]=e[t-1],e[t-1]=l,a.value=e,I()},Z=t=>{let e=a.value,l=e[t];e[t]=e[t+1],e[t+1]=l,a.value=e,I()},ee=t=>{$.value=t,L()},te=()=>{let t=window.location.href;Q(t),fe.value=n("common.link-copied")},le=t=>{a.value[t].locked=!a.value[t].locked},oe=(t,e)=>{console.log(e,t);let l=isNaN(e.hue)?0:e.hue;t.hex=h(l,e.sat,e.val,"hsv").hex(),I()},ae=t=>{b.value!=t?b.value=t:b.value=-1},w=t=>{let e=t.get("hsl.h"),o=[[e,e+20,e+40],[e,e-20,e-40]][Math.round(Math.random())];x(t,o)},A=t=>{let l=[t.get("hsl.h")];x(t,l)},N=t=>{let e=t.get("hsl.h"),o=[[e,e+180],[e,e-180]][Math.round(Math.random())];x(t,o)},V=t=>{let e=t.get("hsl.h"),o=[[e,e+171,e+99],[e,e-171,e-99]][Math.round(Math.random())];x(t,o)},D=t=>{let e=t.get("hsl.h"),o=[[e,e+120,e+240],[e,e-120,e-240]][Math.round(Math.random())];x(t,o)},O=t=>{for(let e=t;e<a.value.length;e++){let l=a.value[e];l.locked||(l.hex=h.random().hex())}},j=t=>{let e=t.get("hsl.h"),o=[[e,e+90,e+180,e+270],[e,e-90,e-180,e-270]][Math.round(Math.random())];x(t,o)},E=t=>{let e=t.get("hsl.h"),o=[[e,60+e,180+e,240+e],[e,e-60,e-180,e-240]][Math.round(Math.random())];x(t,o)},x=(t,e)=>{for(let l=0;l<r.value.length;l++){let o=r.value[l];if(!o.locked){let d=t.get("hsl.h");l<e.length?d=e[l]%360:d=e[Math.round(Math.random()*e.length-1)]%360;let C=Math.random(),se=Math.random();o.hex=h(d,C,se,"hsl").hex()}}},z=t=>{k.value.length==0&&(t=0);for(let e=t;e<a.value.length;e++){let l=a.value[e];if(!l.locked){let o=(Math.random()*110+310)%360,d=Math.random(),C=Math.random();l.hex=h(o,d,C,"hsl").hex()}}},U=t=>{k.value.length==0&&(t=0);for(let e=t;e<a.value.length;e++){let l=a.value[e];if(!l.locked){let o=(Math.random()*250+60)%360,d=Math.random(),C=Math.random();l.hex=h(o,d,C,"hsl").hex()}}},L=()=>{let t=null;const e=k.value;let l=0;if(e.length==0)t=h.random(),a.value[0].hex=t.hex(),l=1;else{let o=Math.round(Math.random()*(e.length-1));t=h(e[o].hex)}switch($.value){case n("palette.harmony.auto"):let o=Math.random()*10;o<1?O(l):o<2?w(t):o<3?D(t):o<4?E(t):o<5?N(t):o<6?V(t):o<7?j(t):o<8?z(l):o<9?U(l):A(t);break;case n("palette.harmony.random"):O(l);break;case n("palette.harmony.analogous"):w(t);break;case n("palette.harmony.triadic"):D(t);break;case n("palette.harmony.tetradic"):E(t);break;case n("palette.harmony.complementary"):N(t);break;case n("palette.harmony.split-complementary"):V(t);break;case n("palette.harmony.square"):j(t);break;case n("palette.harmony.warm"):z(l);break;case n("palette.harmony.cool"):U(l);break;case n("palette.harmony.monochromatic"):A(t);break}I()},ne=t=>{a.value.length<10&&(a.value.splice(t,0,{hashId:M(6),hex:h.random().hex(),locked:!1}),I())},re=t=>{a.value.length>1&&(a.value=a.value.filter((e,l,o)=>t!=l),I())},I=()=>{let t=a.value.map(e=>e.hex.substring(1)).join("-");i.push({path:i.currentRoute.value.path,query:{colors:t}})};return me(()=>{if(i.currentRoute.value.query.colors==null)L();else{if(typeof i.currentRoute.value.query.colors!="string")return;const t=i.currentRoute.value.query.colors.split("-");a.value=[];for(let e=0;e<t.length;e++)a.value.push({hex:"#"+t[e].toUpperCase(),locked:!1,hashId:M(6)})}}),ve(()=>{document.addEventListener("keypress",t=>{t.code=="Space"&&L()})}),(t,e)=>(g(),R(X,null,[m(B(ge),null,{default:T(()=>[v("meta",{name:"description",content:a.value.map(l=>l.hex).join(", ")},null,8,Re),v("meta",{property:"og:description",content:a.value.map(l=>l.hex).join(", ")},null,8,Le),Pe,v("title",null,"Dyetools - "+K(t.$t("palette.title")),1)]),_:1}),v("div",He,[v("div",qe,[m(W,{values:c,"onUpdate:modelValue":ee,"model-value":$.value},null,8,["model-value"]),m(W,{values:f,modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l)},null,8,["modelValue"]),m(J,{icon:"i-tabler-share",onClick:te}),m(J,{icon:"i-tabler-refresh",onClick:L})]),m(pe,{name:"move",tag:"div",class:"paletteColors"},{default:T(()=>[(g(!0),R(X,null,ye(a.value,(l,o)=>(g(),F(Fe,{key:l.hashId,color:l,canMoveLeft:o!==0,canMoveRight:o!==a.value.length-1,displayType:u.value,pickerOpen:b.value===o,index:o,"max-index":a.value.length-1,onTogglePicker:d=>ae(o),onMoveLeft:d=>Y(o),onMoveRight:d=>Z(o),onDelete:d=>re(o),onEdit:(d,C)=>oe(d,C),onPin:d=>le(o),onAdd:e[1]||(e[1]=d=>ne(d))},null,8,["color","canMoveLeft","canMoveRight","displayType","pickerOpen","index","max-index","onTogglePicker","onMoveLeft","onMoveRight","onDelete","onEdit","onPin"]))),128))]),_:1})])],64))}});const _e=_(Te,[["__scopeId","data-v-00f20bb4"]]);export{_e as default};
